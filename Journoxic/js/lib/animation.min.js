/*Version4.2.0Build082015.1936ByAnoxic*/window.animation={},animation.isDebug=0,window.log={FILE_NOT_FOUND:"Cannot find the file ",FILES_NOT_FOUND:"Cannot find the list of files",FILE_NOT_LOADED:"Cannot load the file ",DOWNLOAD_PROMPT:". Please make sure it has been downloaded",LOCATION_PIN_FAIL:"Cannot find the current location. Please make sure you have enabled it or the browser does not support geocode",LOCATION_NO_RESULTS:"No results found",LOCATION_NO_ADDRESS:"Cannot read the address",NO_ENTRY_SELECTED:"No entry is selected",LOAD_DATA_FAIL:"Cannot load the data",NO_CONTENT:": no new content is specified",NO_ARCHIVE:": no archive data is found",FOLDER_CREATED:"Folder for this date created",MEDIA_CLEAN_START:"Start returning lost media ...",MEDIA_CLEAN_NO_DATA:"No media found. Please press the button on the right to check the resource before returning lost media",MEDIA_CLEAN_NO_FILES:"No media found",MEDIA_CLEAN_GET_FOLDERS_FAIL:"Cannot get download available folder list",MEDIA_CLEAN_FOUND:" lost media found",MEDIA_CLEAN_UNDEFINED_FOUND:" undefined media found and cleaned",MEDIA_CLEAN_NOT_FOUND:"No lost media found",MEDIA_CLEAN_UNDEFINED_NOT_FOUND:"No undefined media found",MEDIA_CLEAN_FAIL:" media failed to be moved. Please try again",MEDIA_CLEAN_SUCCESS:"All lost media moved to their original folder",ARCHIVE_START:"Loading archive list ...",ARCHIVE_TOO_MANY:"Too many archive files. Only the latest 500 files will be displayed",ARCHIVE_END:"Archive list loaded",ARCHIVE_INVALID_JSON:"This archive is corrupted",ARCHIVE_SELECT_ALL:"No archive is selected. All archives will be selected",ARCHIVE_NO_SELECTED:"No archive is selected",ARCHIVE_NO_SELECTED_REMOVE:"No archive is selected to be removed",ARCHIVE_NO_PROTECT_CHANGE:"No archive's protection state changed",ARCHIVE_REMOVE_START:"Removing selected archive file(s) ...",ARCHIVE_REMOVE_END:" archive file(s) removed. To recover the files, visit OneDrive immediately and find them in the trash",ARCHIVE_REMOVE_FAIL:"Cannot remove some files. Please try again",ARCHIVE_PROTECT_REMOVE:'Removal for protected file "',ARCHIVE_PROTECT_REMOVE_END:'" skipped',ARCHIVE_PROTECT_START:"Toggling archive protection for selected files ...",ARCHIVE_PROTECT_CHANGE:'Archive file "',ARCHIVE_PROTECT_CHANGE_PROTECTED:'" protected',ARCHIVE_PROTECT_CHANGE_UNPROTECTED:'" unprotected',ARCHIVE_PROTECT_FAIL:'Cannot toggle archive protection of file "',ARCHIVE_PROTECT_END:"Archive protection toggle finished",CONTENTS_NEW:"Found new content with ",CONTENTS_NEW_END:" chars",CONTENTS_RELOADED:"Data reloaded",CONTENTS_DOWNLOAD_START:"Loading archive data ...",CONTENTS_DOWNLOAD_TEXT:"Text data loaded",CONTENTS_DOWNLOAD_TEXT_FAIL:"Cannot load the text data",CONTENTS_DOWNLOAD_MEDIA_START:"Loading media data ...",CONTENTS_DOWNLOAD_MEDIA_LOADED:"Loaded ",CONTENTS_DOWNLOAD_MEDIA_OF:" of ",CONTENTS_DOWNLOAD_MEDIA_FAIL:"Cannot load the media data",CONTENTS_DOWNLOAD_MEDIA_END:"Media data loaded",CONTENTS_DOWNLOAD_END:"Data download finished",CONTENTS_UPLOAD_START:"Start uploading archive data ...",CONTENTS_BACKUP_START:"Start creating backups ...",CONTENTS_UPLOAD_BACKUP:"Data backup finished",CONTENTS_UPLOAD_BACKUP_FAIL:"Cannot backup archive data. Please see if there is any name conflict",CONTENTS_UPLOAD_REGISTER_FAIL:"Cannot register folder for this year. Please try again later",CONTENTS_UPLOAD_END:"Data upload finished for ",CONTENTS_UPLOAD_FAIL:"Cannot upload data",CONTENTS_UPGRADING:"Upgrading content data to latest version ...",COVER_PHOTO_FOUND:"Found cover photo ",COVER_PHOTO_FAIL:"Cannot find matched result for cover photo",AUDIO_DOWNLOAD_START:"Loading audio files ...",AUDIO_DOWNLOAD_END:"Audio files loaded",AUDIO_EXPIRED:"Audio file expired. Please re-download the media",VIDEO_DOWNLOAD_START:"Loading video files ...",VIDEO_DOWNLOAD_END:"Video files loaded",VIDEO_EXPIRED:"Video file expired. Please re-download the media",MEDIA_ALREADY_DISPLAYED:"Another media is playing. Close that to continue",EDIT_PANE_QUIT:"Data discarded",EDIT_PANE_SAVE_START:"Saving data ...",EDIT_PANE_SAVE_PENDING_ATTACHMENTS:"Pending changes saved",EDIT_PANE_SAVE_END:"Finished saving data",TAG_ADD_HEADER:'Tag "',TAG_ICON_ADD_HEADER:'Icon "',TAG_ADDED_ALREADY:'" is already added',TAG_ADDED:'" added',TAG_ADDED_FAILED:'" cannot be added',TAG_REMOVED:'" removed',EDIT_PANE_NOT_SWITCHABLE:"Save or quit editing this entry to switch to another panel",EDIT_PANE_IMAGES_ALREADY_LOADED:"Images have already been loaded",EDIT_PANE_IMAGES_FAIL:"Cannot load images",EDIT_PANE_IMAGES_START:"Start loading images under data/",EDIT_PANE_IMAGES_START_END:" ...",EDIT_PANE_IMAGES_END:"Images loaded",EDIT_PANE_IMAGES_END_NO_RESULT:"No attached images found",EDIT_PANE_IMAGES_FIND_FAIL:" under data/",EDIT_PANE_IMAGES_SAVE_START:"Start transferring images ...",EDIT_PANE_IMAGES_OF:" of ",EDIT_PANE_IMAGES_TRASNFERRED:" image transferred",EDIT_PANE_FINISHED_TRANSFER:"Finished ",EDIT_PANE_FINISHED_TRANSFER_END:" transfer",EDIT_PANE_TRANSFERRED_FAILED:"One transfer failed. No transfer was made",EDIT_PANE_TOO_MANY_RESULTS:"There seems to be so many items. Not all the items will be displayed",EDIT_PANE_WEATHER_START:"Loading weather info ...",EDIT_PANE_WEATHER_RESULT:"Weather data loaded. It is ",EDIT_PANE_WEATHER_RESULT_END:" degrees. Have a good one",EDIT_PANE_WEATHER_END:"Weather data updated",EDIT_PANE_WEATHER_END_FAIL:'Cannot find the matched icon info. Is it "',EDIT_PANE_WEATHER_END_FAIL_END:'" now?',EDIT_PANE_PLAYABLE_SEARCH_START:"Loading resource ...",EDIT_PANE_PLAYABLE_FILE:' file "',EDIT_PANE_PLAYABLE_FILE_ADDED:'" added',EDIT_PANE_PLAYABLE_FILE_SAVED:'" transferred',EDIT_PANE_PLAYABLE_SEARCH_END:"Resource loaded",EDIT_PANE_PLAYABLE_SEARCH_FAILED:"Cannot load the resource",EDIT_PANE_PLAYABLE_SAVE_START:"Start transferring ",EDIT_PANE_PLAYABLE_SAVE_START_END:"s ...",COVERTYPE_AUTO_CHOSEN:"Cover for this entry automatically chosen",QUEUE_START:"Loading queue resources ...",QUEUE_NO_RESULT:"No applicable queue resources found",QUEUE_IMAGES_NOT_LOADED:"Queue images not loaded because local photos were not shown",QUEUE_FOUND_TEXT:"Text data found",QUEUE_FOUND_IMAGES:" image(s) added",QUEUE_FOUND_VIDEOS:" video(s) added",QUEUE_FOUND_VOICES:" voice(s) added",QUEUE_FAILED:"Cannot find queue resources",QUEUE_END:"Queue resources loaded",NETWORK_WORKING:"Please wait until all network activities stop",OVERWRITE_CACHE_WARNING:"You have saved entry data. Either press confirm to overwrite or read it",GET_YEARS_START:"Loading year list ...",GET_YEARS_FAIL:"Cannot load year list. Trying again ..",GET_YEARS_END:"Year list loaded",YEAR_SWITCHED_TO:"Year switched to ",DATA_MOVED_TO_OTHER_YEAR:"Some data migrated to year ",DATA_MOVED_TO_OTHER_YEAR_END:". Upload those data or they will be lost",CREATED_TIME_CHANGED_TO:"Created time for this entry changed to ",START_TIME_CHANGED_TO:"Start time for this entry changed to ",END_TIME_CHANGED_TO:"End time for this entry changed to ",TIME_NOT_IN_RANGE:"Time does not fit in this year",TIME_INVALID:"Invalid time format",STATS_ENTRY_ALREADY_EXIST:"This entry is already added",STATS_ENTRY_EMPTY_STRING:"Invalid entry input",SERVER_RETURNS:" [Error ",SERVER_RETURNS_END:"]",AUTH_REFRESH_ACCESS_START:"Refreshing access token ...",AUTH_REFRESH_ACCESS_END:"Access token refreshed",AUTH_REFRESH_ACCESS_FAILED:"Cannot refresh access token. Please make sure CORS is enabled",AUTH_REFRESH_AUTO_ON:"The access token will now be refreshed every 30 minute",AUTH_REFRESH_AUTO_OFF:"The access token will now stop refreshing",AUTH_REFRESH_EXPIRED:"Previous session expired"},animation.degree=0,animation.duration=300,animation.indent=0,animation.showIcon=function(e,a){$(e).fadeIn(animation.duration,a).css({top:"10px",display:"inline-block"})},animation.hideIcon=function(e,a){var n=$(e).length-1;$(e).each(function(e){e!==n?$(this).fadeOut(animation.duration):$(this).fadeOut(animation.duration,a)})},animation.isShown=function(e){return"10px"===$(e).css("top")&&"none"!==$(e).css("display")},animation.toggleIcon=function(e,a){a=a||function(){},animation.isShown(e)?animation.hideIcon(e,a):animation.showIcon(e,a)},animation.hideMenu=function(e){$("#action-"+e).removeClass("fadein-inline"),animation.hideHiddenIcons()},animation.hideAllMenus=function(){$(".actions > div").each(function(){$(this).removeClass("fadein-inline")})},animation.hideHiddenIcons=function(){$(".actions .hidden-icon").each(function(){$(this).addClass("hidden")})},animation.showMenu=function(e){e="#action-"+e,0===$(e).length&&(e="#action-menu"),$(e).addClass("fadein-inline")},animation.showMenuOnly=function(e){animation.hideAllMenus(),animation.showMenu(e)},animation.testCacheIcons=function(){localStorage._cache?($("#reread").removeClass("hidden"),$(".li-add-entry-sub").each(function(){$(this).addClass("has-sub")})):($("#reread").addClass("hidden"),$(".li-add-entry-sub").each(function(){$(this).removeClass("has-sub")}))},animation.testSub=function(e){var a=!1;$(e).siblings("ul").children("li").children("a").each(function(){return $(this).hasClass("hidden")?void 0:void(a=!0)}),a?$(e).parent().addClass("has-sub"):$(e).parent().removeClass("has-sub")},animation.testYearButton=function(){var e=app.years.indexOf(app.year);return-1===e?void app.yearUpdateTry((new Date).getFullYear()):(0===e?($("#prev-year").addClass("hidden"),$("#next-year").removeClass("hidden")):e===app.years.length-1?($("#next-year").addClass("hidden"),$("#prev-year").removeClass("hidden")):$("#next-year, #prev-year").removeClass("hidden"),void animation.testSub("#this-year"))},animation.testAllSubs=function(){animation.testCacheIcons(),animation.testSub("#add"),animation.testSub("#action-stats"),animation.testYearButton()},animation.blink=function(e){if(animation.isShown(e)){var a=function(){$(e).fadeOut(),$(e).fadeIn()},n=setInterval(a,1800);return console.log("animation.blink()	"+e+": id="+n),n}return void 0},animation.finished=function(e){if(animation.isShown(e)){var a=$(e).html();$(e).fadeOut(300,function(){$(this).html("&#xf00c").css({background:"#fff","font-size":"inherit"})}).fadeIn(300).delay(500).fadeOut(300,function(){$(this).html(a).css({background:"","font-size":""})}).fadeIn(300)}},animation.warning=function(e){if(animation.isShown(e)){var a=$(e).html();$(e).fadeOut(300,function(){$(this).html("&#xf071").css({background:"#fff"})}).fadeIn(300).delay(500).fadeOut(300,function(){$(this).html(a).css({background:""})}).fadeIn(300)}},animation.deny=function(e){if(animation.isShown(e)){var a=$(e).html();$(e).fadeOut(300,function(){$(this).html("&#xf05e").css({color:"#000",background:"#fff"})}).fadeIn(300).delay(500).fadeOut(300,function(){$(this).html(a).css({background:"",color:""})}).fadeIn(300)}},animation.invalid=function(e){$(e).effect("highlight",{color:"#8d8d8d"})},animation.log=function(e,a,n){var i,t=1e4,o=(new Date).getTime(),E="";1===a?E="start ":-1===a&&(--animation.indent<0&&(animation.indent=0),E="end "),animation.indent>0&&(E+="indent-"+animation.indent),n=n||0;var d;switch(n){case 0:i='<p class="'+E+'" id='+o+">"+e+"</p>",d="#feedback";break;case 1:i="<p id="+o+">"+e+"</p>",d="#errors",$(d).empty();break;case 2:i='<p class="'+E+' warning" id='+o+">"+e+"</p>",d="#feedback";break;default:i='<p class="'+E+'" id='+o+">"+e+"</p>",d="#feedback"}switch($(i).prependTo(d).on("contextmenu",function(){return $(d).fadeOut(200,function(){$(this).empty(),$(this).fadeIn(0)}),!1}).mousedown(function(){$(this).trigger("contextmenu"),$(this).fadeOut(200,function(){$(this).remove()})}),n){case 1:e="[ERR] "+e;break;case 2:e="[!!!] "+e}setTimeout(function(){$("#"+o).trigger("mousedown")},t),console.log("From user log: 	"+new Date+": "+e),1===a&&++animation.indent},animation.error=function(e,a,n){void 0!=a?animation.log(e+log.SERVER_RETURNS+a+log.SERVER_RETURNS_END,n,1):animation.log(e,n,1)},animation.warn=function(e,a,n){void 0!=a?animation.log(e+log.SERVER_RETURNS+a+log.SERVER_RETURNS_END,n,2):animation.log(e,n,2)},animation.debug=function(e,a){animation.isDebug?animation.log("[DEBUG] "+e,a):animation.indent+=a},animation.switch=function(e){if(edit.isEditPaneDisplayed)return void animation.error(log.EDIT_PANE_NOT_SWITCHABLE);var a;$("#drawer li").each(function(){$(this).hasClass("display")&&(a=$(this).attr("id"),$(this).removeClass("display"))}),-1===a.indexOf(e)&&("drawer-archive"===a?archive.quit():"drawer-stats"===a&&stats.quit(),"archive"===e?archive.init():"stats"===e&&stats.init(),$("#drawer-"+e).addClass("display"))};